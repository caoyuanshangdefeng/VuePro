<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ES6箭头函数的this</title>
</head>

<body>
  <div>
    <p>
      ES6箭头函数的this
    </p>
    <!-- 箭头函数看上去是匿名函数的一种简写，但实际上，箭头函数和匿名函数有个明显的区别：
      箭头函数内部的this是词法作用域，由上下文确定。
      （词法作用域就是定义在词法阶段的作用域。
      换句话说，词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的，
      因此当词法分析器处理代码时会保持作用域不变 。） -->
  </div>
  <script>
    // 非箭头函数
    var Person = {
      firstName: 'hello',
      lastName: 'world',
      getFullName: function () {
        // 这个this返回的是Person对象
        console.log(this,1111);
        var firstName = this.firstName
        console.log('PersonFirstName',firstName);
        var fn = function () {
          // 这个this返回Window
          console.log(this,2222);
          return this.firstName + this.lastName
        }
        return fn()
      }
    }
    Person.getFullName()

    // 使用箭头函数
    // 箭头函数完全修复了this的指向，this总是指向词法作用域，也就是外层调用者ArrowsDome
    var ArrowsDome={
      firstName: 'helloArrows',
      lastName: 'goodbyeArrows',
      getFullName:function(){
        // 这个this返回的是ArrowsDome对象
        console.log(this,3333);
        var firstName=this.firstName
        console.log('firstName',firstName);
        var fn=()=>{
          // 这个this返回的是ArrowsDome对象
          console.log(this,4444);
          return this.firstName + this.lastName
        }
        return fn()
      }
    }
    ArrowsDome.getFullName()
    




    // 由于this在箭头函数中已经按照词法作用域绑定了，
    // 所以，用call()或者apply()调用箭头函数时，无法对this进行绑定，即传入的第一个参数被忽略
    
  </script>
</body>
</html>